import{I as n}from"./i18n-kypyv4ol.js";import{U as l}from"./main-B1mhdLOB.js";let r=[],e=[];function f(){$.getJSON("answers.json").done(function(t){r=t}).fail(function(){l.toast(n.t("answers.toast_load_fail"))})}function g(){try{const t=localStorage.getItem("answersHistory");t&&(e=JSON.parse(t),i())}catch(t){console.warn("localStorage unavailable:",t)}}function d(){try{localStorage.setItem("answersHistory",JSON.stringify(e))}catch(t){console.warn("localStorage unavailable:",t)}}function i(){if(e.length===0){$("#historySection").hide();return}$("#historySection").show();const t=$("#historyList");t.empty(),e.slice().reverse().forEach(s=>{const a=`
                    <div class="history-item">
                        <span class="history-answer ${s.type}">${n.getCurrentLanguage()==="ko"?s.answer:s.translation}</span>
                        <span class="history-time">${s.time}</span>
                    </div>
                `;t.append(a)})}window.getAnswer=function(){if(r.length===0){l.toast(n.t("answers.toast_loading"));return}const t=$("#bookIcon"),s=$("#answerText"),a=$("#answerTranslation"),c=$("#bookDisplay");s.removeClass("show positive negative neutral"),a.removeClass("show"),t.addClass("flipping"),c.addClass("active"),setTimeout(()=>{t.removeClass("flipping"),c.removeClass("active");const o=r[Math.floor(Math.random()*r.length)];s.text(o.ko),s.addClass("show "+o.type),a.text(o.en),a.addClass("show");const w=new Date,h=w.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});e.push({answer:o.ko,translation:o.en,type:o.type,time:h,timestamp:w.getTime()}),e.length>10&&e.shift(),d(),i()},600)};window.clearHistory=function(){confirm(n.t("answers.confirm_clear"))&&(e=[],d(),i(),l.toast(n.t("answers.toast_cleared")))};$(document).ready(function(){n.init().then(()=>{f(),g(),window.addEventListener("languageChanged",i)})});
