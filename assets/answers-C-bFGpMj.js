import{U as l}from"./main-CujSHOew.js";import{I as n}from"./i18n-CTziurBh.js";import{P as m}from"./utils-BO01l7x6.js";import"./vendor-jquery-DPn9psbx.js";import"./vendor-crypto-DpXOUJby.js";let r=[],o=[];function f(){m.loadJSON("answers.json").then(function(t){r=t}).catch(function(){l.toast(n.t("answers.toast_load_fail"))})}function p(){try{const t=localStorage.getItem("answersHistory");t&&(o=JSON.parse(t),i())}catch(t){console.warn("localStorage unavailable:",t)}}function d(){try{localStorage.setItem("answersHistory",JSON.stringify(o))}catch(t){console.warn("localStorage unavailable:",t)}}function i(){if(o.length===0){$("#historySection").hide();return}$("#historySection").show();const t=$("#historyList");t.empty(),o.slice().reverse().forEach(s=>{const a=`
                    <div class="history-item">
                        <span class="history-answer ${s.type}">${n.getCurrentLanguage()==="ko"?s.answer:s.translation}</span>
                        <span class="history-time">${s.time}</span>
                    </div>
                `;t.append(a)})}window.getAnswer=function(){if(r.length===0){l.toast(n.t("answers.toast_loading"));return}const t=$("#bookIcon"),s=$("#answerText"),a=$("#answerTranslation"),c=$("#bookDisplay");s.removeClass("show positive negative neutral"),a.removeClass("show"),t.addClass("flipping"),c.addClass("active"),setTimeout(()=>{t.removeClass("flipping"),c.removeClass("active");const e=r[Math.floor(Math.random()*r.length)];s.text(e.ko),s.addClass("show "+e.type),a.text(e.en),a.addClass("show");const w=new Date,h=w.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});o.push({answer:e.ko,translation:e.en,type:e.type,time:h,timestamp:w.getTime()}),o.length>10&&o.shift(),d(),i()},600)};window.clearHistory=function(){confirm(n.t("answers.confirm_clear"))&&(o=[],d(),i(),l.toast(n.t("answers.toast_cleared")))};$(document).ready(function(){n.init().then(()=>{f(),p(),window.addEventListener("languageChanged",i)})});
