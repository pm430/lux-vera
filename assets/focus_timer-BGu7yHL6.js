import{I as l}from"./i18n-BowjTgxS.js";let d=null,f=1500,u=!1,g=25,t=null,c={};window.toggleDarkMode=function(){document.body.classList.toggle("dark-mode"),localStorage.setItem("darkMode",document.body.classList.contains("dark-mode"))};localStorage.getItem("darkMode")==="true"&&document.body.classList.add("dark-mode");function m(){const e=Math.floor(f/60),n=f%60;document.getElementById("timerDisplay").textContent=`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}window.toggleTimer=function(){const e=document.getElementById("startBtn");u?(clearInterval(d),e.textContent=l.t("focus.btn_start"),u=!1):(d=setInterval(()=>{f>0?(f--,m()):(clearInterval(d),p(),e.textContent=l.t("focus.btn_start"),u=!1,alert(l.t("focus.alert_time_complete")))},1e3),e.textContent=l.t("focus.btn_pause"),u=!0)};window.resetTimer=function(){clearInterval(d),f=g*60,m(),document.getElementById("startBtn").textContent=l.t("focus.btn_start"),u=!1};window.setTimer=function(e){g=e,clearInterval(d),f=e*60,m(),document.getElementById("startBtn").textContent=l.t("focus.btn_start"),u=!1,document.querySelectorAll(".preset-btn").forEach(n=>{n.classList.remove("active")}),event.target.classList.add("active")};function p(){t||v();const e=t.createOscillator(),n=t.createGain();e.connect(n),n.connect(t.destination),e.frequency.value=800,n.gain.setValueAtTime(.3,t.currentTime),n.gain.exponentialRampToValueAtTime(.01,t.currentTime+.5),e.start(t.currentTime),e.stop(t.currentTime+.5)}function v(){t||(t=new(window.AudioContext||window.webkitAudioContext))}function b(){const e=2*t.sampleRate,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;const a=t.createBufferSource();a.buffer=n,a.loop=!0;const o=t.createBiquadFilter();o.type="lowpass",o.frequency.value=1e3;const i=t.createGain();return i.gain.value=.5,a.connect(o),o.connect(i),i.connect(t.destination),{source:a,gain:i}}function w(){const e=t.createOscillator(),n=t.createGain(),r=t.createBiquadFilter();e.type="sine",e.frequency.value=100,r.type="lowpass",r.frequency.value=400,n.gain.value=.3;const a=t.createOscillator(),o=t.createGain();return a.frequency.value=.5,o.gain.value=50,a.connect(o),o.connect(e.frequency),e.connect(r),r.connect(n),n.connect(t.destination),{source:e,gain:n,lfo:a}}function y(){const e=2*t.sampleRate,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;const a=t.createBufferSource();a.buffer=n,a.loop=!0;const o=t.createBiquadFilter();o.type="bandpass",o.frequency.value=800,o.Q.value=.5;const i=t.createGain();return i.gain.value=.4,a.connect(o),o.connect(i),i.connect(t.destination),{source:a,gain:i}}function B(){const e=2*t.sampleRate,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let i=0;i<e;i++)r[i]=Math.random()*2-1;const a=t.createBufferSource();a.buffer=n,a.loop=!0;const o=t.createGain();return o.gain.value=.3,a.connect(o),o.connect(t.destination),{source:a,gain:o}}window.toggleSound=function(e){if(v(),c[e])c[e].source.stop(),c[e].lfo&&c[e].lfo.stop(),delete c[e],document.getElementById(`status-${e}`).classList.remove("playing"),event.target.classList.remove("active");else{let n;switch(e){case"rain":n=b();break;case"wave":n=w(),n.lfo&&n.lfo.start();break;case"cafe":n=y();break;case"white":n=B();break}n.source.start(),c[e]=n,document.getElementById(`status-${e}`).classList.add("playing"),event.target.classList.add("active")}};window.changeVolume=function(e){const n=e/100;for(let r in c)c[r].gain&&(c[r].gain.gain.value=n)};window.addEventListener("beforeunload",()=>{for(let e in c)c[e].source&&c[e].source.stop(),c[e].lfo&&c[e].lfo.stop()});document.addEventListener("DOMContentLoaded",()=>{l.init()});
