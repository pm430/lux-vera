import"./main-BZCjQA8K.js";import{I as u}from"./i18n-CTziurBh.js";import"./vendor-jquery-DPn9psbx.js";import"./vendor-crypto-DpXOUJby.js";let d=null,l=1500,f=!1,m=25,n=null,s={};window.toggleTheme=function(){const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",t);try{localStorage.setItem("theme",t)}catch(o){console.warn("localStorage unavailable:",o)}p()};function p(){const e=document.querySelector(".theme-toggle");if(e){const t=document.documentElement.getAttribute("data-theme");e.textContent=t==="dark"?"â˜€ï¸":"ðŸŒ™"}}p();function g(){const e=Math.floor(l/60),t=l%60;document.getElementById("timerDisplay").textContent=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;const o=document.getElementById("timerProgress"),a=2*Math.PI*140,r=m*60,i=a-l/r*a;o.style.strokeDasharray=a,o.style.strokeDashoffset=i}window.toggleTimer=function(){const e=document.getElementById("startBtn");f?(clearInterval(d),e.textContent=u.t("focus.btn_start"),f=!1):(d=setInterval(()=>{l>0?(l--,g()):(clearInterval(d),h(),e.textContent=u.t("focus.btn_start"),f=!1,alert(u.t("focus.alert_time_complete")))},1e3),e.textContent=u.t("focus.btn_pause"),f=!0)};window.resetTimer=function(){clearInterval(d),l=m*60,g(),document.getElementById("startBtn").textContent=u.t("focus.btn_start"),f=!1};window.setTimer=function(e,t){m=t,clearInterval(d),l=t*60,g(),document.getElementById("startBtn").textContent=u.t("focus.btn_start"),f=!1,document.querySelectorAll(".focus-preset-btn").forEach(o=>{o.classList.remove("active")}),e.target.classList.add("active")};function h(){n||v();const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.value=800,t.gain.setValueAtTime(.3,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.5),e.start(n.currentTime),e.stop(n.currentTime+.5)}function v(){n||(n=new(window.AudioContext||window.webkitAudioContext))}function b(){const e=2*n.sampleRate,t=n.createBuffer(1,e,n.sampleRate),o=t.getChannelData(0);for(let i=0;i<e;i++)o[i]=Math.random()*2-1;const c=n.createBufferSource();c.buffer=t,c.loop=!0;const a=n.createBiquadFilter();a.type="lowpass",a.frequency.value=1e3;const r=n.createGain();return r.gain.value=.5,c.connect(a),a.connect(r),r.connect(n.destination),{source:c,gain:r}}function w(){const e=n.createOscillator(),t=n.createGain(),o=n.createBiquadFilter();e.type="sine",e.frequency.value=100,o.type="lowpass",o.frequency.value=400,t.gain.value=.3;const c=n.createOscillator(),a=n.createGain();return c.frequency.value=.5,a.gain.value=50,c.connect(a),a.connect(e.frequency),e.connect(o),o.connect(t),t.connect(n.destination),{source:e,gain:t,lfo:c}}function y(){const e=2*n.sampleRate,t=n.createBuffer(1,e,n.sampleRate),o=t.getChannelData(0);for(let i=0;i<e;i++)o[i]=Math.random()*2-1;const c=n.createBufferSource();c.buffer=t,c.loop=!0;const a=n.createBiquadFilter();a.type="bandpass",a.frequency.value=800,a.Q.value=.5;const r=n.createGain();return r.gain.value=.4,c.connect(a),a.connect(r),r.connect(n.destination),{source:c,gain:r}}function B(){const e=2*n.sampleRate,t=n.createBuffer(1,e,n.sampleRate),o=t.getChannelData(0);for(let r=0;r<e;r++)o[r]=Math.random()*2-1;const c=n.createBufferSource();c.buffer=t,c.loop=!0;const a=n.createGain();return a.gain.value=.3,c.connect(a),a.connect(n.destination),{source:c,gain:a}}window.toggleSound=function(e,t){if(v(),s[t])s[t].source.stop(),s[t].lfo&&s[t].lfo.stop(),delete s[t],document.getElementById(`status-${t}`).classList.remove("playing"),e.currentTarget.classList.remove("active");else{let o;switch(t){case"rain":o=b();break;case"wave":o=w(),o.lfo&&o.lfo.start();break;case"cafe":o=y();break;case"white":o=B();break}o.source.start(),s[t]=o,document.getElementById(`status-${t}`).classList.add("playing"),e.currentTarget.classList.add("active")}};window.changeVolume=function(e){const t=e/100;for(let o in s)s[o].gain&&(s[o].gain.gain.value=t)};window.addEventListener("beforeunload",()=>{for(let e in s)s[e].source&&s[e].source.stop(),s[e].lfo&&s[e].lfo.stop()});document.addEventListener("DOMContentLoaded",()=>{u.init()});
