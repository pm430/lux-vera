import{I as s}from"./i18n-kypyv4ol.js";let d=null,f=1500,u=!1,m=25,t=null,r={};window.toggleDarkMode=function(){document.body.classList.toggle("dark-mode");try{localStorage.setItem("darkMode",document.body.classList.contains("dark-mode"))}catch(e){console.warn("localStorage unavailable:",e)}};try{localStorage.getItem("darkMode")==="true"&&document.body.classList.add("dark-mode")}catch(e){console.warn("localStorage unavailable:",e)}function g(){const e=Math.floor(f/60),n=f%60;document.getElementById("timerDisplay").textContent=`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}window.toggleTimer=function(){const e=document.getElementById("startBtn");u?(clearInterval(d),e.textContent=s.t("focus.btn_start"),u=!1):(d=setInterval(()=>{f>0?(f--,g()):(clearInterval(d),v(),e.textContent=s.t("focus.btn_start"),u=!1,alert(s.t("focus.alert_time_complete")))},1e3),e.textContent=s.t("focus.btn_pause"),u=!0)};window.resetTimer=function(){clearInterval(d),f=m*60,g(),document.getElementById("startBtn").textContent=s.t("focus.btn_start"),u=!1};window.setTimer=function(e,n){m=n,clearInterval(d),f=n*60,g(),document.getElementById("startBtn").textContent=s.t("focus.btn_start"),u=!1,document.querySelectorAll(".preset-btn").forEach(a=>{a.classList.remove("active")}),e.target.classList.add("active")};function v(){t||p();const e=t.createOscillator(),n=t.createGain();e.connect(n),n.connect(t.destination),e.frequency.value=800,n.gain.setValueAtTime(.3,t.currentTime),n.gain.exponentialRampToValueAtTime(.01,t.currentTime+.5),e.start(t.currentTime),e.stop(t.currentTime+.5)}function p(){t||(t=new(window.AudioContext||window.webkitAudioContext))}function w(){const e=2*t.sampleRate,n=t.createBuffer(1,e,t.sampleRate),a=n.getChannelData(0);for(let l=0;l<e;l++)a[l]=Math.random()*2-1;const c=t.createBufferSource();c.buffer=n,c.loop=!0;const o=t.createBiquadFilter();o.type="lowpass",o.frequency.value=1e3;const i=t.createGain();return i.gain.value=.5,c.connect(o),o.connect(i),i.connect(t.destination),{source:c,gain:i}}function b(){const e=t.createOscillator(),n=t.createGain(),a=t.createBiquadFilter();e.type="sine",e.frequency.value=100,a.type="lowpass",a.frequency.value=400,n.gain.value=.3;const c=t.createOscillator(),o=t.createGain();return c.frequency.value=.5,o.gain.value=50,c.connect(o),o.connect(e.frequency),e.connect(a),a.connect(n),n.connect(t.destination),{source:e,gain:n,lfo:c}}function y(){const e=2*t.sampleRate,n=t.createBuffer(1,e,t.sampleRate),a=n.getChannelData(0);for(let l=0;l<e;l++)a[l]=Math.random()*2-1;const c=t.createBufferSource();c.buffer=n,c.loop=!0;const o=t.createBiquadFilter();o.type="bandpass",o.frequency.value=800,o.Q.value=.5;const i=t.createGain();return i.gain.value=.4,c.connect(o),o.connect(i),i.connect(t.destination),{source:c,gain:i}}function S(){const e=2*t.sampleRate,n=t.createBuffer(1,e,t.sampleRate),a=n.getChannelData(0);for(let i=0;i<e;i++)a[i]=Math.random()*2-1;const c=t.createBufferSource();c.buffer=n,c.loop=!0;const o=t.createGain();return o.gain.value=.3,c.connect(o),o.connect(t.destination),{source:c,gain:o}}window.toggleSound=function(e,n){if(p(),r[n])r[n].source.stop(),r[n].lfo&&r[n].lfo.stop(),delete r[n],document.getElementById(`status-${n}`).classList.remove("playing"),e.currentTarget.classList.remove("active");else{let a;switch(n){case"rain":a=w();break;case"wave":a=b(),a.lfo&&a.lfo.start();break;case"cafe":a=y();break;case"white":a=S();break}a.source.start(),r[n]=a,document.getElementById(`status-${n}`).classList.add("playing"),e.currentTarget.classList.add("active")}};window.changeVolume=function(e){const n=e/100;for(let a in r)r[a].gain&&(r[a].gain.gain.value=n)};window.addEventListener("beforeunload",()=>{for(let e in r)r[e].source&&r[e].source.stop(),r[e].lfo&&r[e].lfo.stop()});window.toggleLanguage=function(){const e=s.getCurrentLanguage()==="ko"?"en":"ko";s.changeLanguage(e)};document.addEventListener("DOMContentLoaded",()=>{s.init()});
