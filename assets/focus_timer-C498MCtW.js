import{I as s}from"./i18n-kypyv4ol.js";let d=null,f=1500,l=!1,m=25,n=null,r={};window.toggleTheme=function(){const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",t);try{localStorage.setItem("theme",t)}catch(o){console.warn("localStorage unavailable:",o)}p()};function p(){const e=document.querySelector(".dark-mode-toggle");if(e){const t=document.documentElement.getAttribute("data-theme"),o=t==="dark"?"â˜€ï¸ ":"ðŸŒ™ ",a=t==="dark"?s.getCurrentLanguage()==="ko"?"ë¼ì´íŠ¸ëª¨ë“œ":"Light Mode":s.getCurrentLanguage()==="ko"?"ë‹¤í¬ëª¨ë“œ":"Dark Mode";e.textContent=o+a}}p();function g(){const e=Math.floor(f/60),t=f%60;document.getElementById("timerDisplay").textContent=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}window.toggleTimer=function(){const e=document.getElementById("startBtn");l?(clearInterval(d),e.textContent=s.t("focus.btn_start"),l=!1):(d=setInterval(()=>{f>0?(f--,g()):(clearInterval(d),w(),e.textContent=s.t("focus.btn_start"),l=!1,alert(s.t("focus.alert_time_complete")))},1e3),e.textContent=s.t("focus.btn_pause"),l=!0)};window.resetTimer=function(){clearInterval(d),f=m*60,g(),document.getElementById("startBtn").textContent=s.t("focus.btn_start"),l=!1};window.setTimer=function(e,t){m=t,clearInterval(d),f=t*60,g(),document.getElementById("startBtn").textContent=s.t("focus.btn_start"),l=!1,document.querySelectorAll(".preset-btn").forEach(o=>{o.classList.remove("active")}),e.target.classList.add("active")};function w(){n||v();const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.value=800,t.gain.setValueAtTime(.3,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.5),e.start(n.currentTime),e.stop(n.currentTime+.5)}function v(){n||(n=new(window.AudioContext||window.webkitAudioContext))}function b(){const e=2*n.sampleRate,t=n.createBuffer(1,e,n.sampleRate),o=t.getChannelData(0);for(let u=0;u<e;u++)o[u]=Math.random()*2-1;const a=n.createBufferSource();a.buffer=t,a.loop=!0;const c=n.createBiquadFilter();c.type="lowpass",c.frequency.value=1e3;const i=n.createGain();return i.gain.value=.5,a.connect(c),c.connect(i),i.connect(n.destination),{source:a,gain:i}}function h(){const e=n.createOscillator(),t=n.createGain(),o=n.createBiquadFilter();e.type="sine",e.frequency.value=100,o.type="lowpass",o.frequency.value=400,t.gain.value=.3;const a=n.createOscillator(),c=n.createGain();return a.frequency.value=.5,c.gain.value=50,a.connect(c),c.connect(e.frequency),e.connect(o),o.connect(t),t.connect(n.destination),{source:e,gain:t,lfo:a}}function y(){const e=2*n.sampleRate,t=n.createBuffer(1,e,n.sampleRate),o=t.getChannelData(0);for(let u=0;u<e;u++)o[u]=Math.random()*2-1;const a=n.createBufferSource();a.buffer=t,a.loop=!0;const c=n.createBiquadFilter();c.type="bandpass",c.frequency.value=800,c.Q.value=.5;const i=n.createGain();return i.gain.value=.4,a.connect(c),c.connect(i),i.connect(n.destination),{source:a,gain:i}}function B(){const e=2*n.sampleRate,t=n.createBuffer(1,e,n.sampleRate),o=t.getChannelData(0);for(let i=0;i<e;i++)o[i]=Math.random()*2-1;const a=n.createBufferSource();a.buffer=t,a.loop=!0;const c=n.createGain();return c.gain.value=.3,a.connect(c),c.connect(n.destination),{source:a,gain:c}}window.toggleSound=function(e,t){if(v(),r[t])r[t].source.stop(),r[t].lfo&&r[t].lfo.stop(),delete r[t],document.getElementById(`status-${t}`).classList.remove("playing"),e.currentTarget.classList.remove("active");else{let o;switch(t){case"rain":o=b();break;case"wave":o=h(),o.lfo&&o.lfo.start();break;case"cafe":o=y();break;case"white":o=B();break}o.source.start(),r[t]=o,document.getElementById(`status-${t}`).classList.add("playing"),e.currentTarget.classList.add("active")}};window.changeVolume=function(e){const t=e/100;for(let o in r)r[o].gain&&(r[o].gain.gain.value=t)};window.addEventListener("beforeunload",()=>{for(let e in r)r[e].source&&r[e].source.stop(),r[e].lfo&&r[e].lfo.stop()});window.toggleLanguage=function(){const e=s.getCurrentLanguage()==="ko"?"en":"ko";s.changeLanguage(e)};document.addEventListener("DOMContentLoaded",()=>{s.init()});
